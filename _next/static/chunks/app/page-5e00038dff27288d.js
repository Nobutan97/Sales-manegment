(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9535:function(e,r,t){Promise.resolve().then(t.bind(t,1866))},1866:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return p}});var s=t(3827),n=t(4090);async function o(e){try{let r="https://script.google.com/macros/s/AKfycbwWiIWzH59AJ7QaRMy2WsVd0nUMIg-z8kkWZ_QWzlAGKpq_l-HSlTiz5pYaVSFumXzZwA/exec";if(!r)throw Error("GAS URLが設定されていません");let t=await fetch("".concat(r,"?action=").concat(e),{method:"GET",mode:"cors"});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));return await t.json()}catch(e){return console.error("Error fetching from GAS:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async function a(e,r){try{let t="https://script.google.com/macros/s/AKfycbwWiIWzH59AJ7QaRMy2WsVd0nUMIg-z8kkWZ_QWzlAGKpq_l-HSlTiz5pYaVSFumXzZwA/exec";if(!t)throw Error("GAS URLが設定されていません");let s=await fetch(t,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:e,data:r})});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));return await s.json()}catch(e){return console.error("Error posting to GAS:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}var i=t(6371),c=t(9769),l=t(3167),d=t(1367);function u(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,d.m6)((0,l.W)(r))}let f=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=n.forwardRef((e,r)=>{let{className:t,variant:n,size:o,asChild:a=!1,...c}=e,l=a?i.g7:"button";return(0,s.jsx)(l,{className:u(f({variant:n,size:o,className:t})),ref:r,...c})});m.displayName="Button";let h=n.forwardRef((e,r)=>{let{className:t,type:n,...o}=e;return(0,s.jsx)("input",{type:n,className:u("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...o})});function p(){let[e,r]=(0,n.useState)([]),[t,i]=(0,n.useState)(!0),[c,l]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),{toast:f}=function(){let[e,r]=(0,n.useState)([]);return{toast:e=>{Date.now(),r(r=>[...r,e]),setTimeout(()=>{r(r=>r.filter(r=>r!==e))},e.duration||3e3)},toasts:e}}(),p=async()=>{try{let e=await o("getSalespersons");if(e.success&&e.data)r(e.data.salespersons);else throw Error(e.error||"担当者データの取得に失敗しました")}catch(e){f({title:"エラー",description:e instanceof Error?e.message:"担当者データの取得に失敗しました",variant:"destructive"})}finally{i(!1)}},g=async e=>{e.preventDefault();try{let e=await a("addSalesperson",{name:c,email:d});if(e.success)f({title:"成功",description:"担当者を追加しました"}),l(""),u(""),p();else throw Error(e.error||"担当者の追加に失敗しました")}catch(e){f({title:"エラー",description:e instanceof Error?e.message:"担当者の追加に失敗しました",variant:"destructive"})}};return((0,n.useEffect)(()=>{p()},[]),t)?(0,s.jsx)("div",{children:"読み込み中..."}):(0,s.jsxs)("div",{className:"container mx-auto p-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"営業担当者一覧"}),(0,s.jsxs)("form",{onSubmit:g,className:"mb-8 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"名前"}),(0,s.jsx)(h,{type:"text",value:c,onChange:e=>l(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"メールアドレス"}),(0,s.jsx)(h,{type:"email",value:d,onChange:e=>u(e.target.value),required:!0})]}),(0,s.jsx)(m,{type:"submit",children:"追加"})]}),(0,s.jsx)("div",{className:"grid gap-4",children:0===e.length?(0,s.jsx)("p",{children:"担当者が登録されていません"}):e.map(e=>(0,s.jsx)("div",{className:"border rounded-lg p-4 flex justify-between items-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})},e.id))})]})}h.displayName="Input"}},function(e){e.O(0,[869,971,69,744],function(){return e(e.s=9535)}),_N_E=e.O()}]);